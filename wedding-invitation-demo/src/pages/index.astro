---
import '../styles/global.css';
---

<html lang="ko">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<title>ê¹€ì² ìˆ˜ â™¥ ì´ì˜í¬ ê²°í˜¼ì‹</title>
		<!-- ì´ë¯¸ì§€ ì‚¬ì „ ë¡œë“œ (ê°€ì¥ ì¤‘ìš”) -->
		<link rel="preload" as="image" href="/chungchup/play_timed.gif" />
		<link rel="preload" as="image" href="/chungchup/image/DSC05105.jpg" />
		
		<meta name="description" content="ê¹€ì² ìˆ˜ì™€ ì´ì˜í¬ì˜ ê²°í˜¼ì‹ì— ì´ˆëŒ€í•©ë‹ˆë‹¤" />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Hahmlet:wght@300;500;700&family=Yeon+Sung&display=swap" rel="stylesheet">
		<!-- ì¹´ì¹´ì˜¤ë§µ SDK (ê°€ì´ë“œ Step 3) -->
		<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=51211e1cc3ff7894096e02e1de129d3d&libraries=services"></script>
		<!-- ë„¤ì´ë²„ ì§€ë„ SDK -->
		<script type="text/javascript" src="//openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=oya3z2iso0"></script>
	</head>
	<body class="text-gray-800 font-sans mx-auto shadow-2xl" style="max-width: 448px; height: 100dvh; background-color: #f3f4f6; position: relative; overflow: hidden;">
		<!-- í©ë‚ ë¦¬ëŠ” ê½ƒì ë°°ê²½ -->
		<div id="petal-container" aria-hidden="true" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; overflow: hidden;"></div>
		
		<!-- ì»¤íŠ¼ íš¨ê³¼ ìš”ì†Œë“¤ -->
		<div id="curtain-overlay" class="absolute inset-0 z-50 pointer-events-none" data-curtain="true" style="display: block; width: 100%; height: 100%; overflow: hidden;">
			<!-- ê²€ì€ í™”ë©´ (SVG Maskë¥¼ ì´ìš©í•œ ì •ë°€ ìŠ¤í¬íŠ¸ë¼ì´íŠ¸) -->
			<div id="black-overlay-container" class="absolute inset-0 z-49 pointer-events-none" style="display: block; width: 100%; height: 100%;">
				<svg width="100%" height="100%" preserveAspectRatio="none">
					<defs>
						<mask id="spotlight-mask">
							<!-- í°ìƒ‰ì€ ë¶ˆíˆ¬ëª…(ê²€ì€ íŒ), ê²€ì€ìƒ‰ì€ íˆ¬ëª…(êµ¬ë©/ë¹›) -->
							<rect width="100%" height="100%" fill="white" />
							<path id="spotlight-path" d="" fill="black" />
						</mask>
					</defs>
					<rect width="100%" height="100%" fill="black" opacity="0.97" mask="url(#spotlight-mask)" />
				</svg>
			</div>

			<!-- ì´ˆê¸° ì „ì²´ í™”ë©´ ë®ê°œ -->
			<div id="initial-overlay" class="absolute bg-white" style="z-index: 50; display: block; position: absolute; inset: 0; background-color: white; opacity: 0;" data-curtain="initial-overlay"><!-- ì´ˆê¸° í™”ë©´ ë®ê°œ --></div>

			<!-- 4ê°œì˜ í•˜ì–€ ì‚¬ê°í˜• -->
			<div id="curtain-top-left" class="absolute bg-white" style="z-index: 51; display: block; position: absolute; background-color: white;" data-curtain="panel"><!-- ì»¤íŠ¼ íŒ¨ë„ --></div>
			<div id="curtain-top-right" class="absolute bg-white" style="z-index: 51; display: block; position: absolute; background-color: white;" data-curtain="panel"><!-- ì»¤íŠ¼ íŒ¨ë„ --></div>
			<div id="curtain-bottom-left" class="absolute bg-white" style="z-index: 51; display: block; position: absolute; background-color: white;" data-curtain="panel"><!-- ì»¤íŠ¼ íŒ¨ë„ --></div>
			<div id="curtain-bottom-right" class="absolute bg-white" style="z-index: 51; display: block; position: absolute; background-color: white;" data-curtain="panel"><!-- ì»¤íŠ¼ íŒ¨ë„ --></div>

			<!-- ì´ˆê¸° íšŒìƒ‰ ê°€ë¡œì¤„ -->
			<div id="initial-gray-line-left" class="absolute bg-gray-400" style="z-index: 53; display: block; height: 2px; opacity: 0;" data-curtain="initial-line"><!-- ì´ˆê¸° ê°€ë¡œì¤„ ì™¼ìª½ --></div>
			<div id="initial-gray-line-right" class="absolute bg-gray-400" style="z-index: 53; display: block; height: 2px; opacity: 0;" data-curtain="initial-line"><!-- ì´ˆê¸° ê°€ë¡œì¤„ ì˜¤ë¥¸ìª½ --></div>

			<!-- 20ê°œì˜ ì£¼ë¦„ ì„¸ë¡œì„  -->
			<svg id="wrinkles-container" style="z-index: 52; display: block; position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none;" data-curtain="wrinkles">
				<!-- ì£¼ë¦„ ì„ ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
			</svg>
		</div>

		<!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ - ìˆ˜ì²© í˜•íƒœ -->
		<main id="notebook-container" class="notebook-container h-full flex flex-col mx-auto" style="padding: 30px 10px 10px 10px; max-width: 448px; position: relative; z-index: 10; opacity: 0; pointer-events: none; box-sizing: border-box;">

			<!-- ìˆ˜ì²© ê³ ë¦¬ë“¤ -->
			<div class="notebook-rings">
				<div class="ring"></div>
				<div class="ring"></div>
				<div class="ring"></div>
				<div class="ring"></div>
				<div class="ring"></div>
			</div>

			<!-- ìˆ˜ì²© í˜ì´ì§€ (3D í”Œë¦½ ì»¨í…Œì´ë„ˆ) -->
			<div id="tab-content" class="notebook-page flex-1" style="perspective: 1500px; position: relative;">

				<!-- í‘œì§€ í˜ì´ì§€ -->
				<div id="tab-cover" class="tab-panel active" style="z-index: 5; position: relative;">
					<img src="/chungchup/play_timed.gif" alt="play animation" style="width: 85%; height: auto; object-fit: contain; border-radius: 10px; position: absolute; bottom: 10%; left: 50%; transform: translateX(-50%);" />
				</div>

				<!-- íƒ­ 1: í™ˆ/ì¸ì‚¬ -->
				<div id="tab-home" class="tab-panel hidden-under flex flex-col" data-page="0">
					<!-- ìƒë‹¨ ì˜ì—­: ì‚¬ì§„ + ì •ë³´ ê²¹ì¹¨ (ë²½ì—ì„œ ë„ì›€) -->
					<section class="flex-1 px-2 pt-2 pb-1 flex flex-col overflow-hidden">
						<div class="flex-1 relative w-full rounded-2xl overflow-hidden shadow-md border border-gray-100 bg-gray-100">
							<!-- ë©”ì¸ ì‚¬ì§„ -->
							<div class="absolute inset-0 w-full h-full bg-cover bg-center" style="background-image: url('/chungchup/image/DSC05105.jpg');">
							</div>

							<!-- ì‹ ë‘ì‹ ë¶€ ì •ë³´ (ì‚¬ì§„ ìœ„ì— ì˜¤ë²„ë ˆì´) -->
							<div class="relative z-10 text-center pt-2 pb-4 px-4 h-full flex flex-col">
								<div class="mb-2">
									<h1 class="text-[clamp(1.8rem,9vw,2.25rem)] font-bold text-gray-900 mb-1 drop-shadow-lg whitespace-nowrap" style="font-family: 'Yeon Sung', cursive; letter-spacing: -0.05em;">
										ê¹€ì² ìˆ˜ â™¥ ì´ì˜í¬
									</h1>
								</div>

								<div class="mt-auto bg-white/10 backdrop-blur-[1px] py-4 rounded-xl">
									<h2 class="text-[clamp(1rem,4.5vw,1.25rem)] font-bold text-gray-800 mb-0.5 drop-shadow-sm whitespace-nowrap">
										2024ë…„ 10ì›” 25ì¼ í† ìš”ì¼
									</h2>
									<p class="text-[clamp(0.85rem,3.5vw,1rem)] font-semibold text-rose-800 whitespace-nowrap">
										ì˜¤í›„ 2ì‹œ
									</p>
								</div>
							</div>
						</div>
					</section>

					<!-- ì¸ì‚¿ë§ (í•˜ë‹¨ ê³ ì • - ë†’ì´ ê³ ì • ë° ìŠ¬ë¦¼í™”) -->
					<section class="px-2 pb-2 pt-1 text-center flex-shrink-0">
						<div class="bg-rose-50/50 rounded-2xl p-3 shadow-sm border border-rose-100/30 h-[115px] flex flex-col justify-center backdrop-blur-[1px]">
							<div class="text-[clamp(12px,3.8vw,14px)] text-gray-800 leading-relaxed flex flex-col items-center font-medium" style="font-family: 'Hahmlet', serif; letter-spacing: -0.03em; font-weight: 500;">
								<span class="whitespace-nowrap">ìš°ì—°íˆ ì‹œì‘ëœ ë§Œë‚¨ì€ ì ì–ì€ í•„ì—°ì´ ë˜ì—ˆìŠµë‹ˆë‹¤.</span>
								<span class="whitespace-nowrap">ê·¸ í•„ì—°ì„ ì¼œì¼œì´ í¬ê°œë³´ë‹ˆ ìš´ëª…ì„ì„ ì•Œì•˜ìŠµë‹ˆë‹¤.</span>
								<span class="whitespace-nowrap">ê·¸ëŸ¬ë‹ˆ ì„œë¡œ í•¨ê»˜ í•˜ëŠ”ê²ƒì´ í–‰ë³µì„ì„ ì•Œê² ìŠµë‹ˆë‹¤.</span>
								<span class="whitespace-nowrap">ê·¸ ë‹¤ì§ì˜ ê¸°ì¨ì„ ì—¬ëŸ¬ë¶„ê³¼ ë‚˜ëˆ„ë ¤í•˜ë‹ˆ</span>
								<span class="whitespace-nowrap">ë¹›ë‚˜ëŠ” ì¶•ë³µì„ ì„ ë¬¼í•´ì£¼ì‹œê¸¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</span>
							</div>
						</div>
					</section>
				</div>

				<!-- íƒ­ 2: ê°¤ëŸ¬ë¦¬ -->
				<div id="tab-gallery" class="tab-panel hidden-under" data-page="1">
					<!-- ì‚¬ì§„ ê°¤ëŸ¬ë¦¬ -->
					<section id="gallery-section" class="px-0 py-4 flex flex-col h-full overflow-hidden relative">
						<h3 class="text-lg font-semibold text-center mb-2 text-rose-800 flex-shrink-0">ê°¤ëŸ¬ë¦¬</h3>
						
						<!-- ëª¨ë“œ ì „í™˜ ë²„íŠ¼ -->
						<button id="gallery-mode-btn" class="absolute top-4 right-4 z-50 w-10 h-10 bg-white/90 rounded-full shadow-lg flex items-center justify-center text-xl transition-all active:scale-90 border border-rose-100">
							<span id="mode-icon-viewer" class="opacity-0 invisible absolute">ğŸ–¼ï¸</span>
							<span id="mode-icon-grid" class="opacity-100 visible absolute">ğŸ“±</span>
						</button>

						<!-- ê°¤ëŸ¬ë¦¬ ì»¨í…ì¸  ì»¨í…Œì´ë„ˆ (ë ˆì´ì–´ ê²¹ì¹¨ êµ¬ì¡°) -->
						<div class="gallery-content-layers flex-1 relative w-full overflow-hidden">
							
							<!-- 1. ë·°ì–´ ëª¨ë“œ ë ˆì´ì–´ -->
							<div id="viewer-mode-layer" class="absolute inset-0 flex flex-col transition-all duration-300 opacity-100 visible z-10">
								<!-- ë©”ì¸ í° ì´ë¯¸ì§€ - ë ˆì´ì–´ êµ¬ì¡° (ë ‰ ë°©ì§€) -->
								<div class="main-image-viewport flex-1 w-full relative flex items-center justify-center overflow-hidden mb-4 px-4">
									<div id="main-image-layers" class="relative w-full h-full flex items-center justify-center">
										<img data-id="img-0" src="/chungchup/image/DSC05105.jpg" class="absolute max-w-full max-h-full object-contain rounded-lg shadow-md transition-opacity duration-500 opacity-100" />
										<img data-id="img-1" src="/chungchup/image/DSC05106.jpg" class="absolute max-w-full max-h-full object-contain rounded-lg shadow-md transition-opacity duration-500 opacity-0" />
										<img data-id="img-2" src="/chungchup/image/DSC05107.jpg" class="absolute max-w-full max-h-full object-contain rounded-lg shadow-md transition-opacity duration-500 opacity-0" />
										<img data-id="img-3" src="/chungchup/image/DSC05108.jpg" class="absolute max-w-full max-h-full object-contain rounded-lg shadow-md transition-opacity duration-500 opacity-0" />
										<img data-id="img-4" src="/chungchup/image/DSC05109.jpg" class="absolute max-w-full max-h-full object-contain rounded-lg shadow-md transition-opacity duration-500 opacity-0" />
										<img data-id="img-5" src="/chungchup/image/DSC05110.jpg" class="absolute max-w-full max-h-full object-contain rounded-lg shadow-md transition-opacity duration-500 opacity-0" />
									</div>
								</div>

								<!-- ì¸ë„¤ì¼ ìŠ¬ë¼ì´ë” ì»¨í…Œì´ë„ˆ -->
								<div class="gallery-slider-wrapper relative px-0 mb-8 flex-shrink-0">
									<div id="thumbnail-slider" class="flex items-center gap-3 overflow-x-auto py-4 snap-x snap-mandatory scrollbar-hide cursor-grab active:cursor-grabbing" style="scrollbar-width: none; -ms-overflow-style: none; touch-action: pan-x;">
										<!-- ì¢Œìš° ì—¬ë°±ì„ ìœ„í•œ ë”ë¯¸ ìš”ì†Œ -->
										<div class="flex-shrink-0 w-[42%] h-1"></div>
										
										<div class="thumb-item snap-center flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 border-transparent transition-all duration-300" data-index="0">
											<img src="/chungchup/image/DSC05105.jpg" class="w-full h-full object-cover" />
										</div>
										<div class="thumb-item snap-center flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 border-transparent transition-all duration-300" data-index="1">
											<img src="/chungchup/image/DSC05106.jpg" class="w-full h-full object-cover" />
										</div>
										<div class="thumb-item snap-center flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 border-transparent transition-all duration-300" data-index="2">
											<img src="/chungchup/image/DSC05107.jpg" class="w-full h-full object-cover" />
										</div>
										<div class="thumb-item snap-center flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 border-transparent transition-all duration-300" data-index="3">
											<img src="/chungchup/image/DSC05108.jpg" class="w-full h-full object-cover" />
										</div>
										<div class="thumb-item snap-center flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 border-transparent transition-all duration-300" data-index="4">
											<img src="/chungchup/image/DSC05109.jpg" class="w-full h-full object-cover" />
										</div>
										<div class="thumb-item snap-center flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 border-transparent transition-all duration-300" data-index="5">
											<img src="/chungchup/image/DSC05110.jpg" class="w-full h-full object-cover" />
										</div>

										<!-- ì¢Œìš° ì—¬ë°±ì„ ìœ„í•œ ë”ë¯¸ ìš”ì†Œ -->
										<div class="flex-shrink-0 w-[42%] h-1"></div>
									</div>
								</div>
							</div>

							<!-- 2. ê·¸ë¦¬ë“œ ëª¨ë“œ ë ˆì´ì–´ -->
							<div id="grid-mode-layer" class="absolute inset-0 transition-all duration-300 opacity-0 invisible z-0 overflow-y-auto px-4 pb-8">
								<div class="grid grid-cols-5 gap-2 pt-2">
									<div class="thumb-click-item aspect-square rounded-md overflow-hidden shadow-sm border border-gray-100 active:scale-95 transition-transform" data-index="0">
										<img src="/chungchup/image/DSC05105.jpg" class="w-full h-full object-cover" />
									</div>
									<div class="thumb-click-item aspect-square rounded-md overflow-hidden shadow-sm border border-gray-100 active:scale-95 transition-transform" data-index="1">
										<img src="/chungchup/image/DSC05106.jpg" class="w-full h-full object-cover" />
									</div>
									<div class="thumb-click-item aspect-square rounded-md overflow-hidden shadow-sm border border-gray-100 active:scale-95 transition-transform" data-index="2">
										<img src="/chungchup/image/DSC05107.jpg" class="w-full h-full object-cover" />
									</div>
									<div class="thumb-click-item aspect-square rounded-md overflow-hidden shadow-sm border border-gray-100 active:scale-95 transition-transform" data-index="3">
										<img src="/chungchup/image/DSC05108.jpg" class="w-full h-full object-cover" />
									</div>
									<div class="thumb-click-item aspect-square rounded-md overflow-hidden shadow-sm border border-gray-100 active:scale-95 transition-transform" data-index="4">
										<img src="/chungchup/image/DSC05109.jpg" class="w-full h-full object-cover" />
									</div>
									<div class="thumb-click-item aspect-square rounded-md overflow-hidden shadow-sm border border-gray-100 active:scale-95 transition-transform" data-index="5">
										<img src="/chungchup/image/DSC05110.jpg" class="w-full h-full object-cover" />
									</div>
								</div>
							</div>

						</div>

					</section>
				</div>

				<!-- íƒ­ 3: ì˜¤ì‹œëŠ” ê¸¸ -->
				<div id="tab-location" class="tab-panel hidden-under" data-page="2">
					<!-- ì¥ì†Œ ì •ë³´ -->
					<section class="px-4 py-4">
						<h3 class="text-lg font-semibold text-center mb-4 text-rose-800">ì˜¤ì‹œëŠ” ê¸¸</h3>

						<!-- ì§€ë„ ì„ íƒ íƒ­ -->
						<div class="flex space-x-1 mb-0 px-1">
							<button class="map-tab active flex-1 py-2 text-[11px] font-bold rounded-t-lg transition-all" data-map="kakao">ì¹´ì¹´ì˜¤ë§µ</button>
							<button class="map-tab flex-1 py-2 text-[11px] font-bold rounded-t-lg transition-all" data-map="naver">ë„¤ì´ë²„ë§µ</button>
							<button class="map-tab flex-1 py-2 text-[11px] font-bold rounded-t-lg transition-all" data-map="google">êµ¬ê¸€ë§µ</button>
						</div>

						<!-- ì§€ë„ ì»¨í…Œì´ë„ˆ ì˜ì—­ -->
						<div class="relative w-full h-56 rounded-b-lg overflow-hidden shadow-inner border border-gray-200 mb-4 bg-gray-50">
							<!-- ì¹´ì¹´ì˜¤ (JS SDK) -->
							<div id="map-kakao" class="map-view absolute inset-0 z-10 opacity-100"></div>
							<!-- ë„¤ì´ë²„ (JS SDK) -->
							<div id="map-naver" class="map-view absolute inset-0 z-0 opacity-0 pointer-events-none"></div>
							<!-- êµ¬ê¸€ (ì„ë² ë“œ) -->
							<div id="map-google" class="map-view absolute inset-0 z-0 opacity-0 pointer-events-none">
								<iframe src="https://maps.google.com/maps?q=ì•„ì´í‹°ì»¨ë²¤ì…˜&t=&z=15&ie=UTF8&iwloc=&output=embed" class="w-full h-full border-0"></iframe>
							</div>
						</div>

						<!-- ê¸¸ì°¾ê¸° ë²„íŠ¼ -->
						<a id="route-btn" href="https://map.kakao.com/link/to/ì•„ì´í‹°ì»¨ë²¤ì…˜,37.2709214,127.0661671" target="_blank" class="block w-full py-3 bg-rose-600 text-white text-center rounded-lg font-bold shadow-md hover:bg-rose-700 transition-colors mb-4 no-underline">
							ğŸš© ì‹¤ì‹œê°„ ê¸¸ì°¾ê¸°
						</a>

						<div class="text-center mb-4">
							<h4 class="text-base font-semibold mb-1">ì•„ì´í‹° ì»¨ë²¤ì…˜</h4>
							<p class="text-sm text-gray-600">í¥ë•ITë°¸ë¦¬ 2ì¸µ</p>
							<p class="text-xs text-gray-500">ê²½ê¸°ë„ ìš©ì¸ì‹œ ê¸°í¥êµ¬ í¥ë•1ë¡œ 13</p>
						</div>
					</section>

					<!-- êµí†µí¸ ì•ˆë‚´ -->
					<section class="px-4 py-2">
						<div class="space-y-2">
							<!-- ì§€í•˜ì²  -->
							<div class="bg-blue-50 rounded-lg p-3">
								<h4 class="font-semibold text-sm mb-1 text-blue-800">ğŸš‡ ì§€í•˜ì² </h4>
								<p class="text-xs text-gray-700">
									2í˜¸ì„  ê°•ë‚¨ì—­ 3ë²ˆ ì¶œêµ¬ ë„ë³´ 5ë¶„<br>
									9í˜¸ì„  ì‹ ë…¼í˜„ì—­ 1ë²ˆ ì¶œêµ¬ ë„ë³´ 3ë¶„
								</p>
							</div>

							<!-- ë²„ìŠ¤ -->
							<div class="bg-green-50 rounded-lg p-3">
								<h4 class="font-semibold text-sm mb-1 text-green-800">ğŸšŒ ë²„ìŠ¤</h4>
								<p class="text-xs text-gray-700">
									ê°•ë‚¨ 02, 421, 463ë²ˆ<br>
									'ê°•ë‚¨ì—­' í•˜ì°¨ í›„ ë„ë³´ 5ë¶„
								</p>
							</div>

							<!-- ì£¼ì°¨ -->
							<div class="bg-purple-50 rounded-lg p-3">
								<h4 class="font-semibold text-sm mb-1 text-purple-800">ğŸš— ì£¼ì°¨</h4>
								<p class="text-xs text-gray-700">
									ì§€í•˜ 1ì¸µ~3ì¸µ (3ì‹œê°„ ë¬´ë£Œ)<br>
									ë°œë ›íŒŒí‚¹ ê°€ëŠ¥ (1ë§Œì›)
								</p>
							</div>
						</div>
					</section>
				</div>

				<!-- íƒ­ 4: ë§ˆìŒ ì „í•˜ê¸° -->
				<div id="tab-heart" class="tab-panel hidden-under" data-page="3">
					<!-- ì—°ë½ì²˜ -->
					<section class="px-4 py-4">
						<h3 class="text-lg font-semibold text-center mb-4 text-rose-800">ì—°ë½ì²˜</h3>

						<div class="grid grid-cols-2 gap-3">
							<!-- ì‹ ë‘ì¸¡ -->
							<div class="text-center bg-blue-50 rounded-lg p-3">
								<h4 class="font-semibold mb-2 text-sm text-blue-800">ì‹ ë‘ì¸¡</h4>
								<div class="space-y-1 text-xs">
									<div>
										<p class="font-medium">ê¹€ì² ìˆ˜</p>
										<button class="text-blue-600 underline">010-1234-5678</button>
									</div>
									<div>
										<p class="font-medium">ì•„ë²„ì§€ ê¹€â—‹â—‹</p>
										<button class="text-blue-600 underline">010-1111-2222</button>
									</div>
									<div>
										<p class="font-medium">ì–´ë¨¸ë‹ˆ ë°•â—‹â—‹</p>
										<button class="text-blue-600 underline">010-3333-4444</button>
									</div>
								</div>
							</div>

							<!-- ì‹ ë¶€ì¸¡ -->
							<div class="text-center bg-pink-50 rounded-lg p-3">
								<h4 class="font-semibold mb-2 text-sm text-pink-800">ì‹ ë¶€ì¸¡</h4>
								<div class="space-y-1 text-xs">
									<div>
										<p class="font-medium">ì´ì˜í¬</p>
										<button class="text-pink-600 underline">010-5678-9012</button>
									</div>
									<div>
										<p class="font-medium">ì•„ë²„ì§€ ì´â—‹â—‹</p>
										<button class="text-pink-600 underline">010-5555-6666</button>
									</div>
									<div>
										<p class="font-medium">ì–´ë¨¸ë‹ˆ ìµœâ—‹â—‹</p>
										<button class="text-pink-600 underline">010-7777-8888</button>
									</div>
								</div>
							</div>
						</div>
					</section>

					<!-- ê³„ì¢Œ ì •ë³´ -->
					<section class="px-4 py-4">
						<h3 class="text-lg font-semibold text-center mb-4 text-rose-800">ë§ˆìŒ ì „í•˜ì‹¤ ê³³</h3>

						<div class="space-y-3">
							<!-- ì‹ ë‘ì¸¡ ê³„ì¢Œ -->
							<div class="bg-blue-50 rounded-lg p-3">
								<h4 class="font-semibold mb-2 text-sm text-blue-800 text-center">ì‹ ë‘ì¸¡</h4>
								<div class="flex justify-between items-center bg-white rounded p-2">
									<div>
										<p class="font-medium text-sm">êµ­ë¯¼ì€í–‰</p>
										<p class="text-xs text-gray-600">123-456-789012</p>
										<p class="text-xs">ì˜ˆê¸ˆì£¼: ê¹€ì² ìˆ˜</p>
									</div>
									<button class="text-blue-600 text-xs underline">ë³µì‚¬</button>
								</div>
							</div>

							<!-- ì‹ ë¶€ì¸¡ ê³„ì¢Œ -->
							<div class="bg-pink-50 rounded-lg p-3">
								<h4 class="font-semibold mb-2 text-sm text-pink-800 text-center">ì‹ ë¶€ì¸¡</h4>
								<div class="flex justify-between items-center bg-white rounded p-2">
									<div>
										<p class="font-medium text-sm">ì‹ í•œì€í–‰</p>
										<p class="text-xs text-gray-600">987-654-321098</p>
										<p class="text-xs">ì˜ˆê¸ˆì£¼: ì´ì˜í¬</p>
									</div>
									<button class="text-pink-600 text-xs underline">ë³µì‚¬</button>
								</div>
							</div>
						</div>
					</section>

					<!-- ë‹¬ë ¥/ì¹´ìš´íŠ¸ë‹¤ìš´ -->
					<section class="px-4 py-4">
						<div class="text-center bg-gradient-to-b from-rose-100 to-rose-50 rounded-lg p-4">
							<div class="text-2xl font-bold text-rose-800 mb-1">
								D-30
							</div>
							<p class="text-xs text-gray-600">2024ë…„ 10ì›” 25ì¼ê¹Œì§€</p>
						</div>
					</section>
				</div>

			</div>

			<!-- í•˜ë‹¨ íƒ­ë°” - ìˆ˜ì²© í˜ì´ì§€ë³´ë‹¤ ì¢Œìš° 10pxì”© ë” ì—¬ë°± -->
			<nav id="tab-bar" class="flex-shrink-0 bg-white border-t border-gray-200 safe-area-bottom" style="margin: 0 10px;">
				<div class="flex justify-around items-center h-14">
					<button class="tab-btn active flex flex-col items-center justify-center flex-1 h-full" data-tab="home">
						<span class="text-lg">ğŸ </span>
						<span class="text-xs mt-0.5">í™ˆ</span>
					</button>
					<button class="tab-btn flex flex-col items-center justify-center flex-1 h-full" data-tab="gallery">
						<span class="text-lg">ğŸ“·</span>
						<span class="text-xs mt-0.5">ê°¤ëŸ¬ë¦¬</span>
					</button>
					<button class="tab-btn flex flex-col items-center justify-center flex-1 h-full" data-tab="location">
						<span class="text-lg">ğŸ“</span>
						<span class="text-xs mt-0.5">ì˜¤ì‹œëŠ” ê¸¸</span>
					</button>
					<button class="tab-btn flex flex-col items-center justify-center flex-1 h-full" data-tab="heart">
						<span class="text-lg">ğŸ’</span>
						<span class="text-xs mt-0.5">ë§ˆìŒì „í•˜ê¸°</span>
					</button>
				</div>
			</nav>

		</main>

		<style is:global>
			/* í©ë‚ ë¦¬ëŠ” ê½ƒì ì• ë‹ˆë©”ì´ì…˜ */
			#petal-container {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				pointer-events: none;
				z-index: 20; /* ìˆ˜ì²©(10)ë³´ë‹¤ ìœ„, ì»¤íŠ¼(49)ë³´ë‹¤ ì•„ë˜ */
				overflow: hidden;
			}

			.petal {
				position: absolute;
				background: rgba(255, 192, 203, 0.6); /* íˆ¬ëª…ë„ ì•½ê°„ ê°•í™” */
				border-radius: 40% 60% 60% 40% / 60% 40% 60% 40%;
				animation-name: fall;
				animation-timing-function: linear;
				animation-iteration-count: infinite;
			}

			@keyframes fall {
				from {
					transform: translateY(-20vh) translateX(var(--sway-start)) rotate(var(--rotate-start));
				}
				to {
					transform: translateY(110vh) translateX(var(--sway-end)) rotate(var(--rotate-end));
				}
			}
		</style>

		<style>
			/* ì»¤íŠ¼ íš¨ê³¼ ìŠ¤íƒ€ì¼ */
			.wrinkle-line {
				transition: all 0.1s ease-out;
			}

			.wrinkle-visible {
				opacity: 0.7 !important;
			}

			/* íƒ­ íŒ¨ë„ ìŠ¤íƒ€ì¼ - 3D í˜ì´ì§€ í”Œë¦½ */
			.tab-panel {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background-color: #F5DEB3; /* Default for all tab-panels, including cover */
				border: 1px solid black;
				border-radius: 10px;
				overflow-y: auto;
				overflow-x: hidden;
				transform-style: preserve-3d;
				transform-origin: center -30px;
				transition: transform 0.9s ease-in-out;
				backface-visibility: hidden;
				scrollbar-width: none;
				-ms-overflow-style: none;
			}
            /* Override background for all pages except the cover */
            .tab-panel:not(#tab-cover) {
                background-color: white;
            }

			/* ì¢…ì´ ì§ˆê° - í‘œì§€ì—ë§Œ ì ìš© */
			#tab-cover::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				pointer-events: none;
				opacity: 0.4;
				background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
				border-radius: 10px;
				z-index: 1;
			}

			.tab-panel > * {
				position: relative;
				z-index: 2;
			}

			/* í˜ì´ì§€ ìƒíƒœ í´ë˜ìŠ¤ */
			#tab-home { z-index: 4; }
			#tab-gallery { z-index: 3; }
			#tab-location { z-index: 2; }
			#tab-heart { z-index: 1; }

			.tab-panel.active {
				transform: rotateX(0deg);
			}

			.tab-panel.flipped {
				transform: rotateX(90deg);
			}

			.tab-panel.hidden-flipped {
				transform: rotateX(90deg);
			}

			.tab-panel.hidden-under {
				transform: rotateX(0deg);
			}

			/* íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
			.tab-btn {
				color: #9ca3af;
				transition: color 0.15s;
			}

			.tab-btn.active {
				color: #be185d;
			}

			/* ì§€ë„ íƒ­ ìŠ¤íƒ€ì¼ */
			.map-tab {
				background-color: #f3f4f6;
				color: #6b7280;
				border: 1px solid #e5e7eb;
				border-bottom: none;
			}

			.map-tab.active {
				background-color: white;
				color: #be185d;
				border-color: #e5e7eb;
				border-bottom-color: white;
				z-index: 5;
			}

			/* ê°¤ëŸ¬ë¦¬ ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
			.scrollbar-hide::-webkit-scrollbar {
				display: none;
			}
			.thumb-item {
				will-change: transform, border-color;
				transition: transform 2s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.2s;
				user-select: none;
				-webkit-user-drag: none;
			}
            .thumb-item img {
                pointer-events: none; /* ì´ë¯¸ì§€ ìì²´ê°€ ë“œë˜ê·¸ë˜ëŠ” í˜„ìƒ ë°©ì§€ */
                -webkit-user-drag: none;
            }
			.thumb-item.active {
				transform: scale(1.18);
				border-color: #be185d;
				z-index: 5;
			}

			/* iOS safe area ëŒ€ì‘ */
			.safe-area-bottom {
				padding-bottom: env(safe-area-inset-bottom, 0);
			}

			/* 3D ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
			#tab-content {
				transform-style: preserve-3d;
			}

			/* ê·¸ë¦¬ë“œ ì•„ì´í…œ ê°•ì¡° ìŠ¤íƒ€ì¼ */
			.grid-highlight {
				outline: 3px solid #be185d;
				outline-offset: -3px;
				box-shadow: 0 0 15px rgba(190, 24, 93, 0.4);
				animation: pulseHighlight 1.5s infinite ease-in-out;
				z-index: 5;
			}

			@keyframes pulseHighlight {
				0% { outline-color: #be185d; transform: scale(1); }
				50% { outline-color: #fda4af; transform: scale(1.05); }
				100% { outline-color: #be185d; transform: scale(1); }
			}

			/* ìˆ˜ì²© ê³ ë¦¬ ì»¨í…Œì´ë„ˆ */
			.notebook-rings {
				position: absolute;
				top: 10px;
				left: 10px;
				right: 10px;
				display: flex;
				justify-content: space-around;
				padding: 0 10%;
				z-index: 10;
			}

			/* ê°œë³„ ê³ ë¦¬ ìŠ¤íƒ€ì¼ - íƒ€ì›í˜• ë§ (ì˜†ì—ì„œ ë³¸ ëŠë‚Œ) */
			.ring {
				width: 14px;
				height: 25px;
				border: 3px solid #E8E8E8;
				border-bottom: none;
				border-radius: 7px 7px 0 0;
				background: transparent;
				box-shadow:
					0 1px 2px rgba(0,0,0,0.1);
			}
		</style>

		<script is:inline>
			// 3D í˜ì´ì§€ í”Œë¦½ íƒ­ ì „í™˜ ë¡œì§
			document.addEventListener('DOMContentLoaded', function() {
				const tabBtns = document.querySelectorAll('.tab-btn');
				const tabPanels = document.querySelectorAll('.tab-panel');
				const tabOrder = ['home', 'gallery', 'location', 'heart'];
				let currentPage = 0;
				let isAnimating = false;
				let canFlip = false; // ì¸íŠ¸ë¡œ ì¢…ë£Œ ì „ê¹Œì§€ ì…ë ¥ ì°¨ë‹¨

				// ì´ˆê¸° ìƒíƒœ ì„¤ì • (ì»¤ë²„ê°€ ìˆìœ¼ë¯€ë¡œ í™ˆì„ activeë¡œ ì‹œì‘í•˜ì§€ ì•ŠìŒ)
				function initPages() {
					tabPanels.forEach((panel) => {
						if (panel.id !== 'tab-cover') {
							panel.classList.add('hidden-under');
						}
					});
				}

				initPages();

				// í˜ì´ì§€ ì „í™˜ í•¨ìˆ˜ (ìˆœì°¨ì  ì• ë‹ˆë©”ì´ì…˜ ì ìš©)
				async function flipToPage(targetIndex) {
					if (isAnimating || !canFlip || targetIndex === currentPage) return;
					isAnimating = true;

					const animationDuration = 100;
					const stepDuration = 100;
					if (targetIndex > currentPage) {
						for (let i = currentPage; i < targetIndex; i++) {
							const pageToFlip = document.getElementById('tab-' + tabOrder[i]);
							pageToFlip.classList.remove('active', 'hidden-under');
							pageToFlip.classList.add('flipped');
							await new Promise(res => setTimeout(res, stepDuration));
						}
					} else {
						for (let i = currentPage - 1; i >= targetIndex; i--) {
							const pageToUnflip = document.getElementById('tab-' + tabOrder[i]);
							pageToUnflip.classList.remove('flipped', 'hidden-flipped');
							pageToUnflip.classList.add('active');
							await new Promise(res => setTimeout(res, stepDuration));
						}
					}

					await new Promise(res => setTimeout(res, animationDuration));
					currentPage = targetIndex;
					tabPanels.forEach((panel) => {
						if (panel.id === 'tab-cover') return;
						const panelIndex = parseInt(panel.dataset.page, 10);
						panel.classList.remove('active', 'flipped', 'hidden-flipped', 'hidden-under');
						if (panelIndex === currentPage) {
							panel.classList.add('active');
						} else if (panelIndex < currentPage) {
							panel.classList.add('hidden-flipped');
						} else {
							panel.classList.add('hidden-under');
						}
					});
					const targetPanel = document.getElementById('tab-' + tabOrder[targetIndex]);
					if(targetPanel) targetPanel.scrollTop = 0;
                    
                    // 'ì˜¤ì‹œëŠ” ê¸¸' íƒ­ì¼ ê²½ìš° ì§€ë„ ë ˆì´ì•„ì›ƒ ì¬ì •ë ¬ (ê¹¨ì§ ë°©ì§€)
                    if (tabOrder[targetIndex] === 'location' && window.mapInstance) {
                        setTimeout(() => {
                            window.mapInstance.relayout();
                            const moveLatLon = new kakao.maps.LatLng(37.2709214, 127.0661671);
                            window.mapInstance.setCenter(moveLatLon);
                        }, 500); // 3D ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ ì™„ë£Œ í›„ ì‹¤í–‰
                    }

					isAnimating = false;
				}

				// íƒ­ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
				tabBtns.forEach((btn, index) => {
					btn.addEventListener('click', function() {
						if (!canFlip) return;
						const targetTab = this.getAttribute('data-tab');
						const targetIndex = tabOrder.indexOf(targetTab);
						updateTabButtons(targetIndex);
						flipToPage(targetIndex);
					});
				});

				function updateTabButtons(index) {
					tabBtns.forEach((b, i) => {
						if (i === index) b.classList.add('active');
						else b.classList.remove('active');
					});
				}

                // ì§€ë„ íƒ­ ì „í™˜ ë¡œì§
                const mapTabs = document.querySelectorAll('.map-tab');
                const mapViews = document.querySelectorAll('.map-view');
                const routeBtn = document.getElementById('route-btn');
                const routeUrls = {
                    kakao: 'https://map.kakao.com/link/to/ì•„ì´í‹°ì»¨ë²¤ì…˜,37.2709214,127.0661671',
                    naver: 'https://map.naver.com/p/entry/place/33989425',
                    google: 'https://www.google.com/maps/dir/?api=1&destination=ì•„ì´í‹°ì»¨ë²¤ì…˜+ê²½ê¸°ë„+ìš©ì¸ì‹œ+ê¸°í¥êµ¬+í¥ë•1ë¡œ+13'
                };

                mapTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const target = tab.dataset.map;
                        
                        // íƒ­ UI ë³€ê²½
                        mapTabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        // ì§€ë„ ë·° ë³€ê²½
                        mapViews.forEach(v => {
                            v.classList.remove('z-10', 'opacity-100');
                            v.classList.add('z-0', 'opacity-0', 'pointer-events-none');
                        });
                        const targetView = document.getElementById('map-' + target);
                        targetView.classList.add('z-10', 'opacity-100');
                        targetView.classList.remove('z-0', 'opacity-0', 'pointer-events-none');
                        
                        // ê¸¸ì°¾ê¸° ë§í¬ ë³€ê²½
                        routeBtn.href = routeUrls[target];
                        
                        // ì¹´ì¹´ì˜¤ë§µ ë³µê·€ ì‹œ ë ˆì´ì•„ì›ƒ ì¬ì¡°ì •
                        if (target === 'kakao' && window.mapInstance) {
                            window.mapInstance.relayout();
                            window.mapInstance.setCenter(new kakao.maps.LatLng(37.2709214, 127.0661671));
                        }
                        // ë„¤ì´ë²„ ì§€ë„ ë³µê·€ ì‹œ ë ˆì´ì•„ì›ƒ ì¬ì¡°ì •
                        if (target === 'naver' && window.naverMapInstance) {
                            window.naverMapInstance.updateBy({ size: true });
                            window.naverMapInstance.setCenter(new naver.maps.LatLng(37.2709214, 127.0661671));
                        }
                    });
                });

                // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” (ê°€ì´ë“œ Step 4)
                function initKakaoMap() {
                    var container = document.getElementById('map-kakao'); // ì§€ë„ë¥¼ ë‹´ì„ ì˜ì—­ì˜ DOM ë ˆí¼ëŸ°ìŠ¤
                    var options = { // ì§€ë„ë¥¼ ìƒì„±í•  ë•Œ í•„ìš”í•œ ê¸°ë³¸ ì˜µì…˜
                        center: new kakao.maps.LatLng(37.2709214, 127.0661671), // ì•„ì´í‹° ì»¨ë²¤ì…˜
                        level: 3 // ì§€ë„ì˜ ë ˆë²¨ (í™•ëŒ€, ì¶•ì†Œ ì •ë„)
                    };

                    // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
                    window.mapInstance = new kakao.maps.Map(container, options); 

                    // ë§ˆì»¤ í‘œì‹œ (ê°€ì´ë“œì˜ ë§ˆì»¤ ì˜ˆì œ)
                    var markerPosition  = new kakao.maps.LatLng(37.2709214, 127.0661671); 
                    var marker = new kakao.maps.Marker({
                        position: markerPosition
                    });
                    marker.setMap(window.mapInstance);
                    
                    // ì¸í¬ìœˆë„ìš° í‘œì‹œ
                    var infowindow = new kakao.maps.InfoWindow({
                        content: '<div style="padding:5px;font-size:12px;text-align:center;width:150px;color:#000;background:#fff;border:1px solid #ccc;">ì•„ì´í‹° ì»¨ë²¤ì…˜</div>'
                    });
                    infowindow.open(window.mapInstance, marker);
                }

                // ë„¤ì´ë²„ ì§€ë„ ì´ˆê¸°í™”
                function initNaverMap() {
                    const mapContainer = document.getElementById('map-naver');
                    if (!mapContainer || typeof naver === 'undefined' || !naver.maps) {
                        // SDKê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ë‹¤ë©´ 100ms ë’¤ì— ë‹¤ì‹œ ì‹œë„
                        setTimeout(initNaverMap, 100);
                        return;
                    }

                    const center = new naver.maps.LatLng(37.2709214, 127.0661671);
                    window.naverMapInstance = new naver.maps.Map(mapContainer, {
                        center: center,
                        zoom: 15
                    });

                    const marker = new naver.maps.Marker({
                        position: center,
                        map: window.naverMapInstance
                    });

                    const infowindow = new naver.maps.InfoWindow({
                        content: '<div style="padding:10px;font-size:12px;text-align:center;width:150px;color:#000;background:#fff;border:1px solid #ccc;border-radius:5px;">ì•„ì´í‹° ì»¨ë²¤ì…˜</div>'
                    });
                    infowindow.open(window.naverMapInstance, marker);
                    console.log("Naver Map Initialized");
                }

                // SDK ë¡œë“œ ì™„ë£Œ ëŒ€ê¸°
                if (typeof kakao !== 'undefined' && kakao.maps) {
                    kakao.maps.load(initKakaoMap);
                }
                
                // ë„¤ì´ë²„ ì§€ë„ ì‹¤í–‰
                initNaverMap();

				// ì œìŠ¤ì²˜ ì œì–´
				let lastFlipTime = 0;
				const flipCooldown = 500;
				function handleDirectionalFlip(direction) {
					const now = Date.now();
					if (isAnimating || !canFlip || (now - lastFlipTime < flipCooldown)) return;
					let targetIndex = currentPage;
					if (direction === 'next' && currentPage < tabOrder.length - 1) targetIndex++;
					else if (direction === 'prev' && currentPage > 0) targetIndex--;
					if (targetIndex !== currentPage) {
						lastFlipTime = now;
						updateTabButtons(targetIndex);
						flipToPage(targetIndex);
					}
				}

				window.addEventListener('wheel', (e) => {
					if (!canFlip) return;
					if (e.deltaY > 0) handleDirectionalFlip('next');
					else if (e.deltaY < 0) handleDirectionalFlip('prev');
				}, { passive: true });

				let touchStartY = 0;
				window.addEventListener('touchstart', (e) => {
					if (!canFlip) return;
					touchStartY = e.touches[0].clientY;
				}, { passive: true });

				window.addEventListener('touchend', (e) => {
					if (!canFlip) return;
					const touchEndY = e.changedTouches[0].clientY;
					const diff = touchStartY - touchEndY;
					if (Math.abs(diff) > 50) {
						if (diff > 0) handleDirectionalFlip('next');
						else handleDirectionalFlip('prev');
					}
				}, { passive: true });

				// ê°¤ëŸ¬ë¦¬ ìŠ¬ë¼ì´ë” ë¡œì§
				const thumbSlider = document.getElementById('thumbnail-slider');
				const thumbItems = document.querySelectorAll('.thumb-item');
				const mainLayers = document.querySelectorAll('#main-image-layers img');

				if (thumbSlider && mainLayers.length) {
					let updateTimer = null;
					let currentImageIndex = 0; // í˜„ì¬ ë³´ê³  ìˆëŠ” ì´ë¯¸ì§€ ì¸ë±ìŠ¤ ì¶”ì 
					const observerOptions = { root: thumbSlider, threshold: 0.6, rootMargin: '0px -40% 0px -40%' };
					const observer = new IntersectionObserver((entries) => {
						entries.forEach(entry => {
							if (entry.isIntersecting) {
								const item = entry.target;
								const index = parseInt(item.getAttribute('data-index'), 10);
								currentImageIndex = index; // ì¸ë±ìŠ¤ ì €ì¥
								
								thumbItems.forEach(t => t.classList.remove('active'));
								item.classList.add('active');
								clearTimeout(updateTimer);
								updateTimer = setTimeout(() => {
									requestAnimationFrame(() => {
										mainLayers.forEach((layer, i) => {
											if (i == index) { layer.style.opacity = '1'; layer.style.zIndex = '2'; }
											else { layer.style.opacity = '0'; layer.style.zIndex = '1'; }
										});
									});
								}, 50);
							}
						});
					}, observerOptions);

					thumbItems.forEach(item => {
						observer.observe(item);
						item.addEventListener('dragstart', (e) => e.preventDefault());
					});

					let isDragging = false;
					let startX;
					let scrollLeft;
					const startDrag = (e) => {
						if (!canFlip) return;
						isDragging = true;
						thumbSlider.classList.add('active-drag');
						thumbSlider.style.scrollSnapType = 'none';
						thumbSlider.style.scrollBehavior = 'auto';
						startX = e.pageX - thumbSlider.offsetLeft;
						scrollLeft = thumbSlider.scrollLeft;
					};
					const doDrag = (e) => {
						if (!isDragging) return;
						e.preventDefault();
						const x = e.pageX - thumbSlider.offsetLeft;
						thumbSlider.scrollLeft = scrollLeft - (x - startX) * 1.5;
					};
					const stopDrag = () => {
						if (!isDragging) return;
						isDragging = false;
						thumbSlider.classList.remove('active-drag');
						thumbSlider.style.scrollSnapType = 'x mandatory';
						thumbSlider.style.scrollBehavior = 'smooth';
					};
					thumbSlider.addEventListener('pointerdown', startDrag);
					window.addEventListener('pointermove', doDrag, { passive: false });
					window.addEventListener('pointerup', stopDrag);
					window.addEventListener('pointercancel', stopDrag);

					thumbSlider.addEventListener('wheel', (e) => {
						if (!canFlip) return;
						e.stopPropagation();
						e.preventDefault();
						thumbSlider.scrollLeft += e.deltaY;
					}, { passive: false });

					const modeBtn = document.getElementById('gallery-mode-btn');
					const viewerLayer = document.getElementById('viewer-mode-layer');
					const gridLayer = document.getElementById('grid-mode-layer');
					const iconViewer = document.getElementById('mode-icon-viewer');
					const iconGrid = document.getElementById('mode-icon-grid');
					let isGridView = false;

					modeBtn.addEventListener('click', () => {
						isGridView = !isGridView;
						if (isGridView) {
							viewerLayer.style.opacity = '0';
							viewerLayer.style.visibility = 'hidden';
							viewerLayer.style.zIndex = '0';
							gridLayer.style.opacity = '1';
							gridLayer.style.visibility = 'visible';
							gridLayer.style.zIndex = '10';
							iconViewer.style.opacity = '1';
							iconViewer.style.visibility = 'visible';
							iconGrid.style.opacity = '0';
							iconGrid.style.visibility = 'hidden';

							// [ì¶”ê°€] ê·¸ë¦¬ë“œ ëª¨ë“œ ì§„ì… ì‹œ í˜„ì¬ ì´ë¯¸ì§€ ê°•ì¡° ë° ìŠ¤í¬ë¡¤
							setTimeout(() => {
								const gridItems = gridLayer.querySelectorAll('.thumb-click-item');
								gridItems.forEach(item => item.classList.remove('grid-highlight'));
								
								const targetGridItem = gridItems[currentImageIndex];
								if (targetGridItem) {
									targetGridItem.classList.add('grid-highlight');
									targetGridItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
								}
							}, 100);
						} else {
							viewerLayer.style.opacity = '1';
							viewerLayer.style.visibility = 'visible';
							viewerLayer.style.zIndex = '10';
							gridLayer.style.opacity = '0';
							gridLayer.style.visibility = 'hidden';
							gridLayer.style.zIndex = '0';
							iconViewer.style.opacity = '0';
							iconViewer.style.visibility = 'hidden';
							iconGrid.style.opacity = '1';
							iconGrid.style.visibility = 'visible';
						}
					});

					gridLayer.querySelectorAll('.thumb-click-item').forEach((item, idx) => {
						item.addEventListener('click', () => {
							currentImageIndex = idx; // [ìˆ˜ì •] ì¸ë±ìŠ¤ ì¦‰ì‹œ ì—…ë°ì´íŠ¸
							isGridView = false;
							viewerLayer.style.opacity = '1';
							viewerLayer.style.visibility = 'visible';
							viewerLayer.style.zIndex = '10';
							gridLayer.style.opacity = '0';
							gridLayer.style.visibility = 'hidden';
							gridLayer.style.zIndex = '0';
							iconViewer.style.opacity = '0';
							iconViewer.style.visibility = 'hidden';
							iconGrid.style.opacity = '1';
							iconGrid.style.visibility = 'visible';
							const targetThumb = thumbItems[idx];
							if (targetThumb) {
								thumbSlider.scrollTo({
									left: targetThumb.offsetLeft - (thumbSlider.offsetWidth / 2) + (targetThumb.offsetWidth / 2),
									behavior: 'smooth'
								});
							}
						});
					});
				}

				// ì¸íŠ¸ë¡œ ì¢…ë£Œ í•¸ë“¤ëŸ¬
				window.addEventListener('curtain-animation-finished', () => {
					setTimeout(() => {
						const coverPage = document.getElementById('tab-cover');
						const homePage = document.getElementById('tab-home');
						if (coverPage && homePage) {
							coverPage.classList.remove('active');
							coverPage.classList.add('flipped');
							homePage.classList.remove('hidden-under');
							homePage.classList.add('active');
							const homeButton = document.querySelector('.tab-btn[data-tab="home"]');
							if(homeButton) homeButton.classList.add('active');
							canFlip = true;
						}
					}, 1800);
				});
			});
		</script>
		<script src="/chungchup/curtain-animation.js" is:inline></script>
		<script is:inline>
			document.addEventListener('DOMContentLoaded', function() {
				const petalContainer = document.getElementById('petal-container');
				if (!petalContainer) return;
				const petalCount = 40;
				for (let i = 0; i < petalCount; i++) {
					const petal = document.createElement('div');
					petal.classList.add('petal');
					const size = Math.random() * 8 + 6;
					const startX = Math.random() * 100;
					const duration = Math.random() * 10 + 12;
					const delay = Math.random() * 5;
					const swayStartX = Math.random() * 100 - 50;
					const swayEndX = Math.random() * 100 - 50;
					const rotateStart = Math.random() * 360;
					const rotateEnd = (Math.random() * 360) + rotateStart;
					petal.style.width = `${size}px`;
					petal.style.height = `${size}px`;
					petal.style.left = `${startX}vw`;
					petal.style.animationDuration = `${duration}s`;
					petal.style.animationDelay = `${delay}s`;
					petal.style.opacity = Math.random() * 0.4 + 0.5;
					petal.style.setProperty('--sway-start', `${swayStartX}px`);
					petal.style.setProperty('--sway-end', `${swayEndX}px`);
					petal.style.setProperty('--rotate-start', `${rotateStart}deg`);
					petal.style.setProperty('--rotate-end', `${rotateEnd}deg`);
					petalContainer.appendChild(petal);
				}
			});
		</script>
	</body>
</html>